import{S as _,C as B,P as A,W as C,j as D,O as E,G,k,d as f,l as z,m as P,n as R,o as H,p as W,B as F,M as q,q as O,a as j,r as T,s as I,t as N}from"./OrbitControls-CFPnkAnr.js";import{D as V,G as J}from"./DRACOLoader-BV40ZPQL.js";import{_ as K,e as Q,j as U,c as X,a as w,o as Y}from"./index-DWwuZh5H.js";const Z={class:"home"},$={__name:"car",setup(ee){let L=Q(null);const e=new _;e.background=new B(1118498);const p=new A(75,window.innerWidth/window.innerHeight,.1,1e3);p.position.set(0,4,8);const s=new C({antialias:!0,alpha:!0});s.setSize(window.innerWidth,window.innerHeight),s.shadowMap.enabled=!0,s.toneMapping=D,s.toneMappingExposure=1.5;const i=new E(p,s.domElement);i.enableDamping=!0,i.autoRotate=!0,i.autoRotateSpeed=.5,i.minDistance=5,i.maxDistance=15;const y=()=>{const n=new z,a=2e3,o=new Float32Array(a*3);for(let t=0;t<a*3;t++)o[t]=(Math.random()-.5)*50;n.setAttribute("position",new P(o,3));const d=new R({size:.05,color:8965375,transparent:!0,opacity:.8,blending:H}),r=new W(n,d);return r.position.z=-10,e.add(r),r},S=()=>{const n=new F(30,30,30),a=new q({color:0,side:O}),o=new j(n,a);e.add(o);const d=new T(n),r=new I({color:4491519,transparent:!0,opacity:.3}),t=new N(d,r);return o.add(t),o};let g=[],m=null,u=null;const h=()=>{s.render(e,p),i&&i.update(),m&&(m.rotation.y+=5e-4),u&&(u.rotation.x+=3e-4,u.rotation.y+=5e-4),requestAnimationFrame(h)};return U(()=>{document.querySelector(".canvas-content").appendChild(s.domElement),m=y(),u=S();const n=new G(10,10,4491519,2245751);n.material.opacity=.2,n.material.transparent=!0,e.add(n),window.addEventListener("resize",()=>{p.aspect=window.innerWidth/window.innerHeight,p.updateProjectionMatrix(),s.setSize(window.innerWidth,window.innerHeight),h()});const a=new V;a.setDecoderPath("./draco/");const o=new J;o.setDRACOLoader(a),o.load("./models/car.glb",function(c){c.scene.position.set(0,0,-2),c.scene.traverse(function(l){l.isMesh&&l.name.includes("轮毂")&&g.push(l),l.isMesh&&(l.castShadow=!0,l.receiveShadow=!0)}),e.add(c.scene)},void 0,function(c){console.error(c)});const d=()=>{g.forEach(c=>{c.rotation.x+=.05}),requestAnimationFrame(d)};d();const r=new k(4210752,1);e.add(r);const t=new f(16777215,4);t.position.set(5,20,10),t.castShadow=!0,t.shadow.mapSize.width=2048,t.shadow.mapSize.height=2048,e.add(t);const x=new f(16777215);x.position.set(20,0,0),e.add(x);const M=new f(16777215);M.position.set(-20,0,0),e.add(M);const b=new f(8965375,1);b.position.set(-5,10,-10),e.add(b);const v=new f(16746564,1);v.position.set(0,5,-15),e.add(v),h()}),(n,a)=>(Y(),X("div",Z,[w("div",{class:"canvas-content",ref_key:"canvasRef",ref:L},null,512),a[0]||(a[0]=w("div",{class:"info-panel"},[w("h1",null,"3D汽车展示"),w("p",null,"使用鼠标拖动可以旋转查看模型"),w("p",null,"滚轮可以缩放视图")],-1))]))}},oe=K($,[["__scopeId","data-v-ac220058"]]);export{oe as default};
